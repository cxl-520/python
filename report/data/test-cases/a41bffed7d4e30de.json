{"uid":"a41bffed7d4e30de","name":"Verify code","fullName":"testcase.test_api.test_phone.TestPhone#test_verify_code","historyId":"ccf9b20934c0c3b82f3790d1e5a56565","time":{"start":1771127737964,"stop":1771127738022,"duration":58},"status":"failed","statusMessage":"Failed: verify failed, business code: 1103","statusTrace":"self = <testcase.test_api.test_phone.TestPhone object at 0x0000020ADB4BA2E0>\n\n    @allure.title(\"Verify code\")\n    @allure.severity(allure.severity_level.CRITICAL)\n    @pytest.mark.run(order=2)\n    def test_verify_code(self):\n        with allure.step(\"Step 1: read code input\"):\n            if sys.stdin is not sys.__stdin__:\n                sys.stdin = sys.__stdin__\n            # code = input(\"Enter received code: \")\n            code=\"187234\"\n            allure.attach(f\"code: {code}\", name=\"code\", attachment_type=allure.attachment_type.TEXT)\n    \n        with allure.step(\"Step 2: build request params\"):\n            params_data = {\"phone\": self.phone, \"code\": code}\n            allure.attach(json.dumps(params_data), name=\"params\", attachment_type=allure.attachment_type.JSON)\n    \n        with allure.step(\"Step 3: call verify API\"):\n            try:\n                res = requests.post(self.check_url, data=params_data, timeout=10)\n                allure.attach(str(res.status_code), name=\"status\", attachment_type=allure.attachment_type.TEXT)\n                allure.attach(res.text, name=\"body\", attachment_type=allure.attachment_type.JSON)\n    \n                if res.status_code != 200:\n                    pytest.skip(f\"Non-200 status code: {res.status_code}\")\n    \n                res_json = res.json()\n                if isinstance(res_json, dict) and \"code\" not in res_json and \"status\" in res_json:\n                    res_json[\"code\"] = res_json.get(\"status\")\n    \n                code_val = res_json.get(\"code\") if isinstance(res_json, dict) else None\n                if code_val not in (0, 200, None):\n>                   pytest.fail(f\"verify failed, business code: {code_val}\")\nE                   Failed: verify failed, business code: 1103\n\ntestcase\\test_api\\test_phone.py:98: Failed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"status":"failed","statusMessage":"Failed: verify failed, business code: 1103","statusTrace":"self = <testcase.test_api.test_phone.TestPhone object at 0x0000020ADB4BA2E0>\n\n    @allure.title(\"Verify code\")\n    @allure.severity(allure.severity_level.CRITICAL)\n    @pytest.mark.run(order=2)\n    def test_verify_code(self):\n        with allure.step(\"Step 1: read code input\"):\n            if sys.stdin is not sys.__stdin__:\n                sys.stdin = sys.__stdin__\n            # code = input(\"Enter received code: \")\n            code=\"187234\"\n            allure.attach(f\"code: {code}\", name=\"code\", attachment_type=allure.attachment_type.TEXT)\n    \n        with allure.step(\"Step 2: build request params\"):\n            params_data = {\"phone\": self.phone, \"code\": code}\n            allure.attach(json.dumps(params_data), name=\"params\", attachment_type=allure.attachment_type.JSON)\n    \n        with allure.step(\"Step 3: call verify API\"):\n            try:\n                res = requests.post(self.check_url, data=params_data, timeout=10)\n                allure.attach(str(res.status_code), name=\"status\", attachment_type=allure.attachment_type.TEXT)\n                allure.attach(res.text, name=\"body\", attachment_type=allure.attachment_type.JSON)\n    \n                if res.status_code != 200:\n                    pytest.skip(f\"Non-200 status code: {res.status_code}\")\n    \n                res_json = res.json()\n                if isinstance(res_json, dict) and \"code\" not in res_json and \"status\" in res_json:\n                    res_json[\"code\"] = res_json.get(\"status\")\n    \n                code_val = res_json.get(\"code\") if isinstance(res_json, dict) else None\n                if code_val not in (0, 200, None):\n>                   pytest.fail(f\"verify failed, business code: {code_val}\")\nE                   Failed: verify failed, business code: 1103\n\ntestcase\\test_api\\test_phone.py:98: Failed","steps":[{"name":"Step 1: read code input","time":{"start":1771127737964,"stop":1771127737964,"duration":0},"status":"passed","steps":[],"attachments":[{"uid":"3d7f4bc05ce8be85","name":"code","source":"3d7f4bc05ce8be85.txt","type":"text/plain","size":12}],"parameters":[],"hasContent":true,"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"attachmentStep":false},{"name":"Step 2: build request params","time":{"start":1771127737964,"stop":1771127737965,"duration":1},"status":"passed","steps":[],"attachments":[{"uid":"7150a2a05bb264a","name":"params","source":"7150a2a05bb264a.json","type":"application/json","size":42}],"parameters":[],"hasContent":true,"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"attachmentStep":false},{"name":"Step 3: call verify API","time":{"start":1771127737965,"stop":1771127738021,"duration":56},"status":"failed","statusMessage":"Failed: verify failed, business code: 1103\n","statusTrace":"  File \"C:\\Users\\Administrator\\PycharmProjects\\PythonProject\\testcase\\test_api\\test_phone.py\", line 98, in test_verify_code\n    pytest.fail(f\"verify failed, business code: {code_val}\")\n  File \"C:\\Users\\Administrator\\PycharmProjects\\PythonProject\\.venv\\lib\\site-packages\\_pytest\\outcomes.py\", line 177, in fail\n    raise Failed(msg=reason, pytrace=pytrace)\n","steps":[],"attachments":[{"uid":"cea1ab7502f2f87a","name":"status","source":"cea1ab7502f2f87a.txt","type":"text/plain","size":3},{"uid":"bf1fd63fc43d2fa6","name":"body","source":"bf1fd63fc43d2fa6.json","type":"application/json","size":78}],"parameters":[],"hasContent":true,"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":2,"attachmentStep":false}],"attachments":[],"parameters":[],"hasContent":true,"shouldDisplayMessage":true,"stepsCount":3,"attachmentsCount":4,"attachmentStep":false},"afterStages":[],"labels":[{"name":"story","value":"Send and verify flow"},{"name":"feature","value":"Phone code"},{"name":"epic","value":"SMS verification"},{"name":"severity","value":"critical"},{"name":"parentSuite","value":"testcase.test_api"},{"name":"suite","value":"test_phone"},{"name":"subSuite","value":"TestPhone"},{"name":"host","value":"PC-20250907ITIM"},{"name":"thread","value":"15456-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"testcase.test_api.test_phone"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"critical","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[]}],"history":{"statistic":{"failed":2,"broken":0,"skipped":2,"passed":0,"unknown":0,"total":4},"items":[{"uid":"91cdfad99d2955b7","status":"skipped","statusDetails":"Skipped: Non-200 status code: 502","time":{"start":1770799598594,"stop":1770799598709,"duration":115}},{"uid":"5e073e6ce744437b","status":"skipped","statusDetails":"Skipped: Non-200 status code: 502","time":{"start":1770799268145,"stop":1770799268251,"duration":106}},{"uid":"19bef1b91dca55bc","status":"failed","statusDetails":"Failed: verify failed, business code: 1103","time":{"start":1770798103832,"stop":1770798103895,"duration":63}}]},"tags":[]},"source":"a41bffed7d4e30de.json","parameterValues":[]}