{"uid":"ff4477a5edff4fbd","name":"发送手机验证码接口","fullName":"testcase.test_smoke.test_phone.Test_phone#test_发送手机验证码","historyId":"3053a8c81b0d927337a62c6854e395e0","time":{"start":1771127737211,"stop":1771127737694,"duration":483},"description":"测试手机验证码发送接口，向指定手机号发送验证码，校验HTTP状态码为200","descriptionHtml":"<p>测试手机验证码发送接口，向指定手机号发送验证码，校验HTTP状态码为200</p>\n","status":"failed","statusMessage":"Failed: 验证失败：assert 500 == 200\n +  where 500 = <Response [500]>.status_code","statusTrace":"self = <testcase.test_smoke.test_phone.Test_phone object at 0x0000020ADB4D7BB0>\n\n    @allure.title(\"发送手机验证码接口\")  # 用例标题\n    @allure.severity(allure.severity_level.CRITICAL)  # 优先级：验证码接口为核心流程，设为CRITICAL\n    @allure.description(\"测试手机验证码发送接口，向指定手机号发送验证码，校验HTTP状态码为200\")  # 用例描述\n    @pytest.mark.run(order=1)  # 原有执行顺序保留\n    def test_发送手机验证码(self):\n        with allure.step(\"步骤1：准备请求URL和手机号参数\"):  # 新增：步骤注解\n            # 原有逻辑保留\n            phone = self.phone\n            paeams_data = {\"phone\": phone}\n            # 新增：记录请求信息到Allure报告（脱敏手机号）\n            allure.attach(str(self.post_url), name=\"请求URL\", attachment_type=allure.attachment_type.TEXT)\n            safe_phone = phone[:-4] + \"****\"  # 脱敏手机号后4位\n            allure.attach(f\"phone: {safe_phone}\", name=\"请求参数（脱敏）\", attachment_type=allure.attachment_type.TEXT)\n    \n        with allure.step(\"步骤2：发送POST请求并校验响应\"):  # 新增：步骤注解\n            try:\n                # 原有请求逻辑保留\n                res1 = requests.post(self.post_url, data=paeams_data, timeout=10)\n>               assert res1.status_code == 200\nE               assert 500 == 200\nE                +  where 500 = <Response [500]>.status_code\n\ntestcase\\test_smoke\\test_phone.py:39: AssertionError\n\nDuring handling of the above exception, another exception occurred:\n\nself = <testcase.test_smoke.test_phone.Test_phone object at 0x0000020ADB4D7BB0>\n\n    @allure.title(\"发送手机验证码接口\")  # 用例标题\n    @allure.severity(allure.severity_level.CRITICAL)  # 优先级：验证码接口为核心流程，设为CRITICAL\n    @allure.description(\"测试手机验证码发送接口，向指定手机号发送验证码，校验HTTP状态码为200\")  # 用例描述\n    @pytest.mark.run(order=1)  # 原有执行顺序保留\n    def test_发送手机验证码(self):\n        with allure.step(\"步骤1：准备请求URL和手机号参数\"):  # 新增：步骤注解\n            # 原有逻辑保留\n            phone = self.phone\n            paeams_data = {\"phone\": phone}\n            # 新增：记录请求信息到Allure报告（脱敏手机号）\n            allure.attach(str(self.post_url), name=\"请求URL\", attachment_type=allure.attachment_type.TEXT)\n            safe_phone = phone[:-4] + \"****\"  # 脱敏手机号后4位\n            allure.attach(f\"phone: {safe_phone}\", name=\"请求参数（脱敏）\", attachment_type=allure.attachment_type.TEXT)\n    \n        with allure.step(\"步骤2：发送POST请求并校验响应\"):  # 新增：步骤注解\n            try:\n                # 原有请求逻辑保留\n                res1 = requests.post(self.post_url, data=paeams_data, timeout=10)\n                assert res1.status_code == 200\n    \n                # 新增：记录响应信息到Allure报告\n                allure.attach(str(res1.status_code), name=\"响应状态码\", attachment_type=allure.attachment_type.TEXT)\n                allure.attach(res1.text, name=\"响应内容\", attachment_type=allure.attachment_type.JSON)\n    \n                # 原有打印逻辑保留\n                print(\"验证码发送成功：\", res1.status_code)\n                print(\"验证码发送成功后的json：\", res1.json())\n                print(\"验证码发送成功后的txt：\", res1.text)\n            except  Exception as e:\n                # 新增：异常时记录信息到Allure报告\n                allure.attach(str(e), name=\"异常信息\", attachment_type=allure.attachment_type.TEXT)\n>               pytest.fail(f\"验证失败：{str(e)}\")\nE               Failed: 验证失败：assert 500 == 200\nE                +  where 500 = <Response [500]>.status_code\n\ntestcase\\test_smoke\\test_phone.py:52: Failed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"description":"测试手机验证码发送接口，向指定手机号发送验证码，校验HTTP状态码为200","status":"failed","statusMessage":"Failed: 验证失败：assert 500 == 200\n +  where 500 = <Response [500]>.status_code","statusTrace":"self = <testcase.test_smoke.test_phone.Test_phone object at 0x0000020ADB4D7BB0>\n\n    @allure.title(\"发送手机验证码接口\")  # 用例标题\n    @allure.severity(allure.severity_level.CRITICAL)  # 优先级：验证码接口为核心流程，设为CRITICAL\n    @allure.description(\"测试手机验证码发送接口，向指定手机号发送验证码，校验HTTP状态码为200\")  # 用例描述\n    @pytest.mark.run(order=1)  # 原有执行顺序保留\n    def test_发送手机验证码(self):\n        with allure.step(\"步骤1：准备请求URL和手机号参数\"):  # 新增：步骤注解\n            # 原有逻辑保留\n            phone = self.phone\n            paeams_data = {\"phone\": phone}\n            # 新增：记录请求信息到Allure报告（脱敏手机号）\n            allure.attach(str(self.post_url), name=\"请求URL\", attachment_type=allure.attachment_type.TEXT)\n            safe_phone = phone[:-4] + \"****\"  # 脱敏手机号后4位\n            allure.attach(f\"phone: {safe_phone}\", name=\"请求参数（脱敏）\", attachment_type=allure.attachment_type.TEXT)\n    \n        with allure.step(\"步骤2：发送POST请求并校验响应\"):  # 新增：步骤注解\n            try:\n                # 原有请求逻辑保留\n                res1 = requests.post(self.post_url, data=paeams_data, timeout=10)\n>               assert res1.status_code == 200\nE               assert 500 == 200\nE                +  where 500 = <Response [500]>.status_code\n\ntestcase\\test_smoke\\test_phone.py:39: AssertionError\n\nDuring handling of the above exception, another exception occurred:\n\nself = <testcase.test_smoke.test_phone.Test_phone object at 0x0000020ADB4D7BB0>\n\n    @allure.title(\"发送手机验证码接口\")  # 用例标题\n    @allure.severity(allure.severity_level.CRITICAL)  # 优先级：验证码接口为核心流程，设为CRITICAL\n    @allure.description(\"测试手机验证码发送接口，向指定手机号发送验证码，校验HTTP状态码为200\")  # 用例描述\n    @pytest.mark.run(order=1)  # 原有执行顺序保留\n    def test_发送手机验证码(self):\n        with allure.step(\"步骤1：准备请求URL和手机号参数\"):  # 新增：步骤注解\n            # 原有逻辑保留\n            phone = self.phone\n            paeams_data = {\"phone\": phone}\n            # 新增：记录请求信息到Allure报告（脱敏手机号）\n            allure.attach(str(self.post_url), name=\"请求URL\", attachment_type=allure.attachment_type.TEXT)\n            safe_phone = phone[:-4] + \"****\"  # 脱敏手机号后4位\n            allure.attach(f\"phone: {safe_phone}\", name=\"请求参数（脱敏）\", attachment_type=allure.attachment_type.TEXT)\n    \n        with allure.step(\"步骤2：发送POST请求并校验响应\"):  # 新增：步骤注解\n            try:\n                # 原有请求逻辑保留\n                res1 = requests.post(self.post_url, data=paeams_data, timeout=10)\n                assert res1.status_code == 200\n    \n                # 新增：记录响应信息到Allure报告\n                allure.attach(str(res1.status_code), name=\"响应状态码\", attachment_type=allure.attachment_type.TEXT)\n                allure.attach(res1.text, name=\"响应内容\", attachment_type=allure.attachment_type.JSON)\n    \n                # 原有打印逻辑保留\n                print(\"验证码发送成功：\", res1.status_code)\n                print(\"验证码发送成功后的json：\", res1.json())\n                print(\"验证码发送成功后的txt：\", res1.text)\n            except  Exception as e:\n                # 新增：异常时记录信息到Allure报告\n                allure.attach(str(e), name=\"异常信息\", attachment_type=allure.attachment_type.TEXT)\n>               pytest.fail(f\"验证失败：{str(e)}\")\nE               Failed: 验证失败：assert 500 == 200\nE                +  where 500 = <Response [500]>.status_code\n\ntestcase\\test_smoke\\test_phone.py:52: Failed","steps":[{"name":"步骤1：准备请求URL和手机号参数","time":{"start":1771127737211,"stop":1771127737213,"duration":2},"status":"passed","steps":[],"attachments":[{"uid":"cf9c6cf5034fc425","name":"请求URL","source":"cf9c6cf5034fc425.txt","type":"text/plain","size":46},{"uid":"43289e42fb526864","name":"请求参数（脱敏）","source":"43289e42fb526864.txt","type":"text/plain","size":18}],"parameters":[],"hasContent":true,"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"attachmentStep":false},{"name":"步骤2：发送POST请求并校验响应","time":{"start":1771127737213,"stop":1771127737693,"duration":480},"status":"failed","statusMessage":"Failed: 验证失败：assert 500 == 200\n +  where 500 = <Response [500]>.status_code\n","statusTrace":"  File \"C:\\Users\\Administrator\\PycharmProjects\\PythonProject\\testcase\\test_smoke\\test_phone.py\", line 52, in test_发送手机验证码\n    pytest.fail(f\"验证失败：{str(e)}\")\n  File \"C:\\Users\\Administrator\\PycharmProjects\\PythonProject\\.venv\\lib\\site-packages\\_pytest\\outcomes.py\", line 177, in fail\n    raise Failed(msg=reason, pytrace=pytrace)\n","steps":[],"attachments":[{"uid":"fc0ca1462f3dd1a","name":"异常信息","source":"fc0ca1462f3dd1a.txt","type":"text/plain","size":62}],"parameters":[],"hasContent":true,"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":1,"attachmentStep":false}],"attachments":[],"parameters":[],"hasContent":true,"shouldDisplayMessage":true,"stepsCount":2,"attachmentsCount":3,"attachmentStep":false},"afterStages":[],"labels":[{"name":"epic","value":"IDRC赛事系统自动化测试"},{"name":"feature","value":"IDRC赛事系统接口测试"},{"name":"story","value":"手机验证码发送&校验接口"},{"name":"severity","value":"critical"},{"name":"parentSuite","value":"testcase.test_smoke"},{"name":"suite","value":"test_phone"},{"name":"subSuite","value":"Test_phone"},{"name":"host","value":"PC-20250907ITIM"},{"name":"thread","value":"15456-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"testcase.test_smoke.test_phone"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"critical","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[]}],"history":{"statistic":{"failed":4,"broken":0,"skipped":0,"passed":0,"unknown":0,"total":4},"items":[{"uid":"2546528fcf290949","status":"failed","statusDetails":"Failed: 验证失败：assert 502 == 200\n +  where 502 = <Response [502]>.status_code","time":{"start":1770799598210,"stop":1770799598273,"duration":63}},{"uid":"4fb6cfe166408db5","status":"failed","statusDetails":"Failed: 验证失败：assert 502 == 200\n +  where 502 = <Response [502]>.status_code","time":{"start":1770799267735,"stop":1770799267819,"duration":84}},{"uid":"954581ab869a51ab","status":"failed","statusDetails":"Failed: 验证失败：assert 500 == 200\n +  where 500 = <Response [500]>.status_code","time":{"start":1770798103231,"stop":1770798103526,"duration":295}}]},"tags":[]},"source":"ff4477a5edff4fbd.json","parameterValues":[]}